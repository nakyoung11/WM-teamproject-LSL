CREATE TABLE t_user (
	i_user int UNSIGNED auto_increment primary key,
    user_email varchar(30) unique not null, -- 이메일 겸 아이디
    nickname varchar(20) unique not null, -- 닉네임
    user_pw varchar(70) not null, -- 로그인 비밀번호
    user_year varchar(4) not null, -- 년
    user_month varchar(2) not null, -- 월
    user_date varchar(2) not null, -- 일
    news varchar(1) default 0 not null, -- 소식여부
    profile_img varchar(50), -- 프로필 이미지
    r_dt datetime default now(), -- 등록 시간
    m_dt datetime default now() -- 수정 시간
);

CREATE TABLE t_work (
	i_work INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
	i_user int UNSIGNED NOT NULL,
	i_show int UNSIGNED NOT NULL,
	work_images VARCHAR(50) NOT NULL,
	work_title VARCHAR(50) NOT NULL,
	work_ctnt VARCHAR(1000) NOT NULL,
	r_dt DATETIME DEFAULT NOW(),
   m_dt DATETIME DEFAULT NOW(),
   CONSTRAINT work_fk_1 FOREIGN KEY (i_user) REFERENCES t_user(i_user)
   ON DELETE CASCADE
   ON UPDATE CASCADE,
   CONSTRAINT work_fk_2 FOREIGN KEY (i_show) REFERENCES t_show(i_show)
   ON DELETE CASCADE
   ON UPDATE CASCADE
);

CREATE TABLE t_show (
i_show INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
show_poster VARCHAR(50) NOT NULL,
start_dt DATETIME NOT NULL,
end_dt DATETIME NOT NULL,
exhibit_start_dt DATETIME NOT NULL,
exhibit_end_dt DATETIME NOT NULL,
show_title VARCHAR(30) NOT NULL,
show_ctnt VARCHAR(1000) NOT NULL
);

CREATE TABLE t_show_list (
i_show_list INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
i_show INT UNSIGNED NOT NULL,
i_work INT UNSIGNED NOT NULL
);


CREATE TABLE t_work_like (
i_work INT UNSIGNED NOT NULL,
i_user INT UNSIGNED NOT NULL,
PRIMARY KEY(i_work, i_user)
);

CREATE TABLE t_work_cmt (
i_work_cmt INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
i_work INT UNSIGNED NOT NULL,
i_user INT UNSIGNED NOT NULL,
cmt VARCHAR(1000) NOT NULL,
r_dt DATETIME DEFAULT NOW()
);

CREATE TABLE t_work_cmt_like (
i_work_cmt INT UNSIGNED NOT NULL,
i_user INT UNSIGNED NOT NULL,
PRIMARY KEY(i_work_cmt, i_user)
);
